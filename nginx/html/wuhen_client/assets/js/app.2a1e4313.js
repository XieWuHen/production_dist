(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},i=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/wuhen_client/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("f8a4"),n=a.n(r);n.a},"0679":function(e,t,a){"use strict";var r=a("d3dc"),n=a.n(r);n.a},"08ed":function(e,t,a){},2401:function(e,t,a){"use strict";var r=a("7988"),n=a.n(r);n.a},2443:function(e,t,a){},"2cec":function(e,t,a){"use strict";var r=a("964a"),n=a.n(r);n.a},"30dd":function(e,t,a){},"3fd3":function(e,t,a){},4164:function(e,t,a){},"4d8b":function(e,t,a){"use strict";var r=a("3fd3"),n=a.n(r);n.a},5565:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("a133"),a("ed0d"),a("f09c"),a("e117");var r=a("a59a"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],s=(a("fe8a"),a("6db4"),a("430a")),o=a("8235"),l=a.n(o),c={name:"app",components:{},created:function(){if(localStorage.wuhenToken){var e=l()(localStorage.wuhenToken),t=localStorage.avatar;this.$store.dispatch("setAuthenticated",!this.isEmpty(e)),this.$store.dispatch("setUser",e),this.$store.dispatch("setAvatar",t)}},methods:{isEmpty:function(e){return void 0===e||null===e||"object"===Object(s["a"])(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}}},u=c,d=(a("034f"),a("4023")),m=Object(d["a"])(u,n,i,!1,null,null,null),f=m.exports,p=a("a3c5"),g=a.n(p),h=(a("b9b6"),a("1bee")),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[a("HeadNav"),a("LeftMenu"),a("div",{staticClass:"rightContainer"},[a("router-view")],1)],1)},v=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"head-nav"},[r("el-row",[r("el-col",{staticClass:"nav-left",attrs:{span:6}},[r("img",{staticClass:"logo",attrs:{src:a("b640"),alt:""}}),r("span",{staticClass:"title"},[e._v(" 无痕在线后台资金管理系统 ")])]),r("el-col",{staticClass:"nav-right",attrs:{span:6}},[r("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:""}}),r("div",{staticClass:"text"},[r("p",[e._v("欢迎")]),r("span",[e._v(e._s(e.user.name))])]),r("div",{staticClass:"moreInfo"},[r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.setDialogInfo}},[r("span",{staticClass:"el-dropdown-link"},[r("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"info"}},[e._v("个人信息")]),r("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1)])],1)],1)},w=[],y={name:"HeadNav",computed:{user:function(){return this.$store.getters.user},avatar:function(){return this.$store.getters.avatar}},methods:{setDialogInfo:function(e){switch(e){case"info":this.showInfoList();break;case"logout":this.logout();break}},showInfoList:function(){this.$router.push("/infoshow")},logout:function(){localStorage.removeItem("wuhenToken"),localStorage.removeItem("wuhenToken"),this.$store.dispatch("clearCurrentStore"),this.$router.push("/login")}}},x=y,D=(a("8234"),Object(d["a"])(x,_,w,!1,null,"6799f314",null)),k=D.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"menu-page"},[a("el-col",[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#324057","text-color":"#fff","active-text-color":"#409eff"}},[a("router-link",{attrs:{to:"/home"}},[a("el-menu-item",{attrs:{index:"0"}},[a("i",{staticClass:"el-icon-s-home"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])])],1),e._l(e.items,(function(t){return[t.children?a("el-submenu",{key:t.path,attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t,r){return a("router-link",{key:r,attrs:{to:t.path}},[a("el-menu-item",{attrs:{index:t.path}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])],1)}))],2):e._e()]}))],2)],1)],1)},$=[],T={name:"LeftMenu",data:function(){return{items:[{icon:"el-icon-money",name:"资金管理",path:"fund",children:[{path:"fundList",name:"资金流水"}]},{icon:"el-icon-s-tools",name:"信息管理",path:"info",children:[{path:"infoShow",name:"个人信息"}]}]}}},S=T,E=(a("a69f"),Object(d["a"])(S,C,$,!1,null,"43bd4e7f",null)),U=E.exports,j={name:"index",components:{HeadNav:k,LeftMenu:U}},A=j,O=(a("d530"),Object(d["a"])(A,b,v,!1,null,"603af912",null)),P=O.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("section",{staticClass:"form-container"},[a("div",{staticClass:"manager-tip"},[a("span",{staticClass:"title"},[e._v("无痕在线管理系统")]),a("el-form",{ref:"registerForm",staticClass:"registerForm",attrs:{model:e.registerUser,rules:e.rules,"status-icon":"","label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registerUser.name,callback:function(t){e.$set(e.registerUser,"name",t)},expression:"registerUser.name"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.registerUser.email,callback:function(t){e.$set(e.registerUser,"email",t)},expression:"registerUser.email"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.registerUser.password,callback:function(t){e.$set(e.registerUser,"password",t)},expression:"registerUser.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.registerUser.password2,callback:function(t){e.$set(e.registerUser,"password2",t)},expression:"registerUser.password2"}})],1),a("el-form-item",{attrs:{label:"选择身份"}},[a("el-select",{attrs:{placeholder:"请选择身份"},model:{value:e.registerUser.identity,callback:function(t){e.$set(e.registerUser,"identity",t)},expression:"registerUser.identity"}},[a("el-option",{attrs:{label:"管理员",value:"manager"}}),a("el-option",{attrs:{label:"员工",value:"employee"}})],1)],1),a("el-form-item",[a("el-button",{staticClass:"sumbit-btn",attrs:{type:"primary"},on:{click:function(t){return e.sumbitForm("registerForm")}}},[e._v("注册")])],1)],1)],1)])])},I=[],z=(a("e18c"),a("82ae")),q=a.n(z),F="/api_2/api/users/login",R="/api_2/api/users/register",W="/api_2/api/users/info/edit/",M="/api_2/api/profiles",H="/api_2/api/profiles/",N="/api_2/api/profiles/delete/";function V(e){return new Promise((function(t,a){q.a.post(F,e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}function B(e){return new Promise((function(t,a){q.a.post(R,e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}function J(e,t){return new Promise((function(a,r){q.a.post(W+e,t).then((function(e){a(e.data)})).catch((function(e){r(e)}))}))}function G(){return new Promise((function(e,t){q.a.get(M).then((function(t){e(t.data)})).catch((function(e){t(e)}))}))}function K(e,t){return new Promise((function(a,r){q.a.post("".concat(H).concat(e),t).then((function(e){a(e.data)})).catch((function(e){r(e)}))}))}function Q(e){return new Promise((function(t,a){q.a.delete("".concat(N).concat(e)).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))}var X={name:"register",data:function(){var e=this,t=function(t,a,r){a!==e.registerUser.password?r(new Error("两次输入密码不一致!")):r()};return{registerUser:{name:"",email:"",password:"",password2:"",identity:""},rules:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:2,max:30,message:"长度在2到30个字符之间",trigger:"blur"}],email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30字符之间",trigger:"blur"}],password2:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30字符之间",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{sumbitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;B(t.registerUser).then((function(e){t.$message({message:"账号注册成功",type:"success"}),console.log(e),t.$router.push("/login")})).catch((function(e){return console.log(e)}))}))}}},Y=X,Z=(a("4d8b"),Object(d["a"])(Y,L,I,!1,null,"9e0639d0",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("section",{staticClass:"form-container"},[a("div",{staticClass:"manager-tip"},[a("span",{staticClass:"title"},[e._v("无痕在线管理系统")]),a("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginUser,rules:e.rules,"status-icon":"","label-width":"60px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.loginUser.email,callback:function(t){e.$set(e.loginUser,"email",t)},expression:"loginUser.email"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginUser.password,callback:function(t){e.$set(e.loginUser,"password",t)},expression:"loginUser.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"sumbit-btn",attrs:{type:"primary"},on:{click:function(t){return e.sumbitForm("loginForm")}}},[e._v("登录")])],1),a("div",{staticClass:"register-tip"},[a("p",[e._v(" 还没有账号？点击这里马上 "),a("router-link",{attrs:{to:"/register"}},[e._v("注册")])],1)])],1)],1)])])},ae=[],re={name:"login",data:function(){return{loginUser:{email:"",password:""},rules:{email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30字符之间",trigger:"blur"}]}}},methods:{sumbitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&V(t.loginUser).then((function(e){var a=e.info.token,r=e.info.avatar;localStorage.setItem("wuhenToken",a);var n=l()(a);t.$store.dispatch("setAuthenticated",!t.isEmpty(n)),t.$store.dispatch("setUser",n),localStorage.setItem("avatar",r),t.$store.dispatch("setAvatar",r),t.$router.push("/index")})).catch((function(e){return console.log(e)}))}))},isEmpty:function(e){return void 0===e||null===e||"object"===Object(s["a"])(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}}},ne=re,ie=(a("f72f"),Object(d["a"])(ne,te,ae,!1,null,"2c128bb2",null)),se=ie.exports,oe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},le=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notfound"},[a("h1",[e._v("404")]),a("p",[e._v("页面走丢了~")])])}],ce={name:"notfound"},ue=ce,de=(a("f28b"),Object(d["a"])(ue,oe,le,!1,null,"c8d3e88a",null)),me=de.exports,fe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},pe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[e._v("无痕在线")]),a("p",{staticClass:"lead"},[e._v("这是一段lead简短介绍")])])])}],ge={name:"Home"},he=ge,be=(a("2401"),Object(d["a"])(he,fe,pe,!1,null,"0d33a117",null)),ve=be.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-show"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"user"},[a("img",{attrs:{src:e.avatar,alt:""}}),a("div",{staticClass:"editUser"},[a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.handleEdit()}}},[a("i",{staticClass:"el-icon-edit"}),e._v(" 编辑 ")])],1)])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-item"},[a("i",{staticClass:"el-icon-user-solid"}),a("span",[e._v(e._s(e.user.name))])]),a("div",{staticClass:"user-item"},[a("i",{staticClass:"el-icon-message"}),a("span",[e._v(e._s(e.user.email))])]),a("div",{staticClass:"user-item"},[a("i",{staticClass:"el-icon-s-tools"}),a("span",[e._v(e._s("manager"===e.user.identity?"管理员":"普通员工"))])])])])],1),a("EditUserDialog",{attrs:{dialog:e.dialog}})],1)},we=[],ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"avatar-uploader",attrs:{"element-loading-text":"正在识别图片中...","element-loading-spinner":"el-icon-loading",action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"upload-box"},[e.img_url?a("img",{staticClass:"avatar",attrs:{src:e.img_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]),a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules}},[a("el-form-item",{attrs:{label:"名字:",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"邮箱:",prop:"email","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),a("el-form-item",{attrs:{label:"旧密码:",prop:"oldPassword","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.formData.oldPassword,callback:function(t){e.$set(e.formData,"oldPassword",t)},expression:"formData.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码:",prop:"newPassword","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.formData.newPassword,callback:function(t){e.$set(e.formData,"newPassword",t)},expression:"formData.newPassword"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("formData")}}},[e._v("提 交")])],1)],1)],1)},xe=[],De=(a("6ae3"),a("053b"),a("96db"),a("af86"),a("f1a9"),{name:"EditUserDialog",props:{dialog:Object},data:function(){return{loading:!1,formLabelWidth:"80px",img_url:"",formData:{name:"",email:"",oldPassword:"",newPassword:"",avatar:""},rules:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:2,max:30,message:"长度在2到30个字符之间",trigger:"blur"}],email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}],oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30字符之间",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30字符之间",trigger:"blur"}]}}},computed:{user:function(){return this.$store.getters.user}},methods:{initFormData:function(){this.formData.name=this.user.name,this.formData.id=this.user.id,this.formData.email=this.user.email,this.formData.avatar=""},beforeAvatarUpload:function(e){this.loading=!0;var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message({message:"上传头像图片只能是 JPG 格式!",type:"error"}),a||this.$message({message:"上传头像图片大小不能超过 2MB!",type:"error"}),t&&a},handleAvatarSuccess:function(e,t){var a=this;this.img_url=URL.createObjectURL(t.raw);var r=new Image;r.src=this.img_url,r.onload=function(){var e=a.getBase64Image(r);a.formData.avatar=e,a.loading=!1}},getBase64Image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);var r=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase(),n=t.toDataURL("image/"+r);return n},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(""==t.img_url&&(t.loading=!0),""===t.formData.avatar?(t.loading=!0,t.$message({message:"图片正在上传中...",type:"success"})):J(t.formData.id,t.formData).then((function(e){t.$message({message:"修改成功",type:"success"});var a={};a.id=e._id,a.name=e.name,a.email=e.email,a.identity=e.identity,t.$store.dispatch("setUser",a);var r=e.avatar;t.$store.dispatch("setAvatar",r),t.loading=!1,t.dialog.show=!1,t.formData.avatar=""})).catch((function(e){return console.log(e)})))}))},onCancel:function(){this.dialog.show=!1,this.loading=!1,this.formData.avatar=""},isEmpty:function(e){return void 0===e||null===e||"object"===Object(s["a"])(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}},created:function(){this.initFormData()}}),ke=De,Ce=(a("0679"),Object(d["a"])(ke,ye,xe,!1,null,"a6c59a0a",null)),$e=Ce.exports,Te={name:"InfoShow",components:{EditUserDialog:$e},computed:{user:function(){return this.$store.getters.user},avatar:function(){return this.$store.getters.avatar}},data:function(){return{dialog:{show:!1}}},methods:{handleEdit:function(){this.dialog.show=!0}}},Se=Te,Ee=(a("a7d5"),Object(d["a"])(Se,_e,we,!1,null,"1cb14d86",null)),Ue=Ee.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"found-list"},[a("div",[a("el-form",{attrs:{inline:!0,model:e.search_date}},[a("el-form-item",{attrs:{label:"按照时间筛选："}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间","default-time":"12:00:00"},model:{value:e.search_date.startTime,callback:function(t){e.$set(e.search_date,"startTime",t)},expression:"search_date.startTime"}}),e._v(" -- "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间","default-time":"12:00:00"},model:{value:e.search_date.endTime,callback:function(t){e.$set(e.search_date,"endTime",t)},expression:"search_date.endTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"search"},on:{click:function(t){return e.handleSearch()}}},[e._v("筛选")])],1),a("el-form-item",{staticClass:"rightBtn"},["manager"==e.user.identity?a("el-button",{attrs:{type:"primary",size:"small",icon:"view"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")]):e._e()],1)],1)],1),a("div",{staticClass:"table-container"},[e.tableData.length>0?a("el-table",{staticStyle:{margin:"10px auto",width:"98%"},attrs:{data:e.tableData,"max-height":"400",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"date",align:"center",sortable:"",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}],null,!1,3904736537)}),a("el-table-column",{attrs:{label:"收支类型",prop:"type",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"收支描述",prop:"describe",align:"center",width:"180"}}),a("el-table-column",{attrs:{label:"收入",prop:"income",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#00d053"}},[e._v(e._s(t.row.income))])]}}],null,!1,2555524362)}),a("el-table-column",{attrs:{label:"支出",prop:"expend",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#f56767"}},[e._v(e._s(t.row.expend))])]}}],null,!1,3133580426)}),a("el-table-column",{attrs:{label:"账户现金",prop:"cash",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#4db3ff"}},[e._v(e._s(t.row.cash))])]}}],null,!1,98228131)}),a("el-table-column",{attrs:{label:"备注",prop:"remark",align:"center",width:"220"}}),"manager"==e.user.identity?a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3151533347)}):e._e()],1):e._e(),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.paginationData.current_page,"page-sizes":e.paginationData.page_sizes,"page-size":e.paginationData.page_size,layout:e.paginationData.layout,total:e.paginationData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.paginationData,"current_page",t)},"update:current-page":function(t){return e.$set(e.paginationData,"current_page",t)}}})],1)])],1)],1),a("Dialog",{attrs:{dialog:e.dialog,form:e.form},on:{update:e.initProfile}})],1)},Ae=[],Oe=(a("dbb3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{title:e.dialog.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"收支类型:","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择收支类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.format_type_list,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{prop:"describe",label:"收支描述:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"describe"},model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1),a("el-form-item",{attrs:{prop:"income",label:"收入:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"income"},model:{value:e.form.income,callback:function(t){e.$set(e.form,"income",t)},expression:"form.income"}})],1),a("el-form-item",{attrs:{prop:"expend",label:"支出:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"expend"},model:{value:e.form.expend,callback:function(t){e.$set(e.form,"expend",t)},expression:"form.expend"}})],1),a("el-form-item",{attrs:{prop:"cash",label:"现金:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"cash"},model:{value:e.form.cash,callback:function(t){e.$set(e.form,"cash",t)},expression:"form.cash"}})],1),a("el-form-item",{attrs:{label:"备注:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提 交")])],1)],1)],1)}),Pe=[],Le={name:"Dialog",props:{dialog:Object,form:Object},data:function(){return{formLabelWidth:"120px",format_type_list:["提现","提现手续费","充值","优惠劵","充值礼券","转账"],rules:{describe:[{required:!0,message:"请填写收支描述",trigger:"blur"}],income:[{required:!0,message:"请填写收入金额",trigger:"blur"}],expend:[{required:!0,message:"请填写支出金额",trigger:"blur"}],cash:[{required:!0,message:"请填写账户现金余额",trigger:"blur"}]}}},computed:{user:function(){return this.$store.getters.user}},methods:{onSubmit:function(e){var t=this;"manager"===this.user.identity&&this.$refs[e].validate((function(e){if(e){var a="add"==t.dialog.option?"add":"edit/".concat(t.form.id),r="add"==t.dialog.option?"添加成功":"编辑完成";K(a,t.form).then((function(e){t.$message({message:r,type:"success"}),t.dialog.show=!1,t.$emit("update")})).catch((function(e){console.log(e)}))}}))}}},Ie=Le,ze=Object(d["a"])(Ie,Oe,Pe,!1,null,"68bd5891",null),qe=ze.exports,Fe={name:"FoundList",data:function(){return{search_date:{startTime:"",endTime:""},paginationData:{total:0,current_page:1,page_size:5,page_sizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},tableData:[],allTableData:[],filterTableData:[],dialog:{show:!1,title:"",option:""},form:{type:"",describe:"",income:"",expend:"",cash:"",remark:""}}},computed:{user:function(){return this.$store.getters.user}},created:function(){this.initProfile()},methods:{initProfile:function(){var e=this;G().then((function(t){e.allTableData=t,e.filterTableData=t,console.log(t),e.setPagination()})).catch((function(e){return console.log(e)}))},setPagination:function(){var e=this;this.paginationData.total=this.allTableData.length,this.paginationData.current_page=1,this.paginationData.page_size=5,this.tableData=this.allTableData.filter((function(t,a){return a<e.paginationData.page_size}))},handleEdit:function(e,t){"manager"===this.user.identity&&(this.dialog={show:!0,title:"修改资金信息",option:"edit"},this.form={type:t.type,describe:t.describe,income:t.income,expend:t.expend,cash:t.cash,remark:t.remark,id:t._id})},handleDelete:function(e,t){var a=this;"manager"===this.user.identity&&Q(t._id).then((function(e){a.$message("删除成功"),a.initProfile()})).catch((function(e){console.log(e)}))},handleAdd:function(){this.dialog={show:!0,title:"添加资金信息",option:"add"},this.form={type:"",describe:"",income:"",expend:"",cash:"",remark:"",id:""}},handleSizeChange:function(e){this.paginationData.current_page=1,this.paginationData.page_size=e,this.tableData=this.allTableData.filter((function(t,a){return a<e}))},handleCurrentChange:function(e){for(var t=this.paginationData.page_size*(e-1),a=this.paginationData.page_size*e,r=[],n=t;n<a;n++)this.allTableData[n]&&r.push(this.allTableData[n]),this.tableData=r},handleSearch:function(){if(!this.search_date.startTime||!this.search_date.endTime)return this.$message({type:"warning",message:"请选择时间区间"}),void this.initProfile();var e=this.search_date.startTime.getTime(),t=this.search_date.endTime.getTime();this.allTableData=this.filterTableData.filter((function(a){var r=new Date(a.date),n=r.getTime();return n>=e&&n<=t})),this.setPagination()}},components:{Dialog:qe}},Re=Fe,We=(a("2cec"),Object(d["a"])(Re,je,Ae,!1,null,"7e64ec70",null)),Me=We.exports;r["default"].use(h["a"]);var He=[{path:"/",redirect:"/index"},{path:"*",name:"/404",component:me},{path:"/index",name:"/index",component:P,children:[{path:"",component:ve},{path:"/home",name:"home",component:ve},{path:"/infoShow",name:"infoShow",component:Ue},{path:"/fundList",name:"fundList",component:Me}]},{path:"/register",name:"/register",component:ee},{path:"/login",name:"/login",component:se}],Ne=new h["a"]({mode:"history",base:"/wuhen_client/",routes:He});Ne.beforeEach((function(e,t,a){var r=!!localStorage.wuhenToken;"/login"==e.path||"/register"==e.path||r?a():a("/login")}));var Ve,Be=Ne,Je=a("88d6"),Ge=a("ae8c");r["default"].use(Ge["a"]);var Ke,Qe={SET_AUTHENTICATED:"SET_AUTHENTICATED",SET_USER:"SET_USER",SET_AVATAR:"SET_AVATAR"},Xe={isAuthenticated:!1,user:{},avatar:""},Ye={isAuthenticated:function(e){return e.isAuthenticated},user:function(e){return e.user},avatar:function(e){return e.avatar}},Ze=(Ve={},Object(Je["a"])(Ve,Qe.SET_AUTHENTICATED,(function(e,t){e.isAuthenticated=t||!1})),Object(Je["a"])(Ve,Qe.SET_USER,(function(e,t){t?e.user=t:t={}})),Object(Je["a"])(Ve,Qe.SET_AVATAR,(function(e,t){t?e.avatar=t:t=null})),Ve),et={setAuthenticated:function(e,t){var a=e.commit;a(Qe.SET_AUTHENTICATED,t)},setUser:function(e,t){var a=e.commit;a(Qe.SET_USER,t)},setAvatar:function(e,t){var a=e.commit;a(Qe.SET_AVATAR,t)},clearCurrentStore:function(e){var t=e.commit;t(Qe.SET_AUTHENTICATED,!1),t(Qe.SET_USER,null),t(Qe.SET_AVATAR,null)}},tt=new Ge["a"].Store({state:Xe,getters:Ye,mutations:Ze,actions:et});function at(){Ke=p["Loading"].service({lock:!0,text:"拼命加载中...",background:"rgba(0, 0, 0, 0.7)"})}function rt(){Ke.close()}var nt=0;q.a.interceptors.request.use((function(e){return nt++,at(),localStorage.wuhenToken&&(e.headers.Authorization=localStorage.wuhenToken),e}),(function(e){return Promise.reject(e)})),q.a.interceptors.response.use((function(e){return nt--,0===nt&&rt(),e}),(function(e){rt(),p["Message"].error(e.response.data);var t=e.response.status;return 401==t&&(p["Message"].error("token已失效，请重新登陆"),localStorage.removeItem("wuhenToken"),localStorage.removeItem("avatar"),rt(),Be.push("/login")),Promise.reject(e)}));var it=q.a;r["default"].config.productionTip=!1,r["default"].use(g.a),r["default"].prototype.$axios=it,new r["default"]({router:Be,store:tt,render:function(e){return e(f)}}).$mount("#app")},"5b99":function(e,t,a){},7988:function(e,t,a){},8234:function(e,t,a){"use strict";var r=a("08ed"),n=a.n(r);n.a},"964a":function(e,t,a){},a69f:function(e,t,a){"use strict";var r=a("2443"),n=a.n(r);n.a},a7d5:function(e,t,a){"use strict";var r=a("5565"),n=a.n(r);n.a},b640:function(e,t,a){e.exports=a.p+"assets/img/logo.04bb48ac.jpg"},d3dc:function(e,t,a){},d530:function(e,t,a){"use strict";var r=a("30dd"),n=a.n(r);n.a},f28b:function(e,t,a){"use strict";var r=a("4164"),n=a.n(r);n.a},f72f:function(e,t,a){"use strict";var r=a("5b99"),n=a.n(r);n.a},f8a4:function(e,t,a){}});
//# sourceMappingURL=app.2a1e4313.js.map